<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools">

    <data>

        <variable
            name="activity"
            type="org.appcenter.inudorm.presentation.board.PostDetailActivity" />

        <variable
            name="viewModel"
            type="org.appcenter.inudorm.presentation.board.PostDetailViewModel" />
    </data>


    <FrameLayout
        android:id="@+id/root"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        tools:context=".presentation.board.PostDetailActivity">


        <androidx.constraintlayout.widget.ConstraintLayout
            android:layout_width="match_parent"
            android:layout_height="match_parent">

            <androidx.appcompat.widget.Toolbar
                android:id="@+id/toolbar"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@null"
                android:textAlignment="center"
                android:theme="@style/ThemeOverlay.AppCompat.DayNight.ActionBar"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toTopOf="parent"
                app:menu="@menu/post_detail_menu"
                app:titleTextColor="@color/black">


            </androidx.appcompat.widget.Toolbar>

            <androidx.swiperefreshlayout.widget.SwipeRefreshLayout
                android:id="@+id/refresh_layout"
                android:layout_width="match_parent"
                android:layout_height="0dp"
                app:layout_constraintBottom_toTopOf="@id/commentWrite"
                app:layout_constraintEnd_toEndOf="parent"
                app:layout_constraintStart_toStartOf="parent"
                app:layout_constraintTop_toBottomOf="@id/toolbar"
                app:loading="@{viewModel.postDetailState.loading}"
                >

                <androidx.core.widget.NestedScrollView
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content">

                    <androidx.constraintlayout.widget.ConstraintLayout
                        android:layout_width="match_parent"
                        android:layout_height="0dp">

                        <androidx.constraintlayout.widget.ConstraintLayout
                            android:id="@+id/postArea"
                            android:layout_width="match_parent"
                            android:layout_height="0dp"
                            android:padding="24sp"
                            app:layout_constraintTop_toTopOf="parent">

                            <org.appcenter.inudorm.presentation.component.BoardProfile
                                android:id="@+id/writer"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                app:layout_constraintTop_toTopOf="parent"
                                app:nickname="@{viewModel.postDetailState.data.nickname}"
                                app:profileUrl="@{viewModel.postDetailState.data.profileUrl}"
                                app:timeElapsed="@{viewModel.postDetailState.data.createdAt}" />

                            <TextView
                                android:id="@+id/title"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:fontFamily="@font/notosans_medium"
                                android:includeFontPadding="false"
                                android:text="@{viewModel.postDetailState.data.title}"
                                android:textColor="@color/black"
                                android:textSize="16sp"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/writer"
                                android:layout_marginTop="12sp"
                                tools:text="더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스"/>

                            <TextView
                                android:id="@+id/content"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:fontFamily="@font/notosans_regular"
                                android:includeFontPadding="false"
                                android:text="@{viewModel.postDetailState.data.content}"
                                android:textColor="@color/black"
                                android:textSize="14sp"
                                app:layout_constraintStart_toStartOf="parent"
                                app:layout_constraintTop_toBottomOf="@+id/title"
                                android:layout_marginTop="12sp"
                                tools:text="더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 더미 텍스트 "/>

                            <androidx.recyclerview.widget.RecyclerView
                                android:id="@+id/images"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="horizontal"
                                app:boardImages="@{viewModel.postDetailState.data.postPhotos}"
                                app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager"
                                app:layout_constraintTop_toBottomOf="@id/content"
                                tools:listitem="@layout/item_board_image" />

                        </androidx.constraintlayout.widget.ConstraintLayout>

                        <LinearLayout
                            android:id="@+id/postInteraction"
                            android:layout_width="match_parent"
                            android:layout_height="0dp"
                            android:orientation="vertical"
                            app:layout_constraintTop_toBottomOf="@id/postArea">

                            <View
                                android:layout_width="match_parent"
                                android:layout_height="1dp"
                                android:background="@color/iDorm_gray_200" />



                            <androidx.constraintlayout.widget.ConstraintLayout
                                android:layout_width="match_parent"
                                android:layout_height="match_parent"
                                android:paddingLeft="19sp"
                                android:paddingRight="24sp"
                                android:paddingVertical="17sp">

                                <ImageView
                                    android:id="@+id/imageView2"
                                    android:layout_width="24dp"

                                    android:layout_height="24dp"
                                    android:src="@drawable/ic_thumb"
                                    app:layout_constraintBottom_toBottomOf="parent"
                                    app:layout_constraintStart_toStartOf="parent"
                                    app:layout_constraintTop_toTopOf="parent" />

                                <TextView
                                    android:id="@+id/textView6"
                                    android:layout_width="wrap_content"

                                    android:layout_height="18dp"
                                    android:fontFamily="@font/notosans_regular"
                                    android:includeFontPadding="false"
                                    android:text="@{Integer.toString(viewModel.postDetailState.data.likesCount)}"
                                    android:textColor="@color/iDorm_gray_300"
                                    android:textSize="12sp"
                                    app:layout_constraintBottom_toBottomOf="parent"
                                    app:layout_constraintStart_toEndOf="@+id/imageView2"
                                    app:layout_constraintTop_toTopOf="parent" />

                                <ImageView
                                    android:id="@+id/imageView3"
                                    android:layout_width="24dp"

                                    android:layout_height="24dp"
                                    android:layout_marginStart="8dp"
                                    android:src="@drawable/ic_comment"
                                    app:layout_constraintBottom_toBottomOf="parent"
                                    app:layout_constraintStart_toEndOf="@+id/textView6"
                                    app:layout_constraintTop_toTopOf="parent" />

                                <TextView
                                    android:id="@+id/textView7"

                                    android:layout_width="wrap_content"
                                    android:layout_height="18dp"
                                    android:fontFamily="@font/notosans_regular"
                                    android:includeFontPadding="false"
                                    android:text="@{Integer.toString(viewModel.postDetailState.data.commentsCount)}"
                                    android:textColor="@color/iDorm_gray_300"
                                    android:textSize="12sp"
                                    app:layout_constraintBottom_toBottomOf="parent"
                                    app:layout_constraintStart_toEndOf="@+id/imageView3"
                                    app:layout_constraintTop_toTopOf="parent" />

                                <ImageView
                                    android:id="@+id/imageView4"
                                    android:layout_width="24dp"
                                    android:layout_height="24dp"
                                    android:layout_marginStart="8dp"
                                    android:src="@drawable/ic_img"
                                    app:layout_constraintBottom_toBottomOf="parent"
                                    app:layout_constraintStart_toEndOf="@+id/textView7"
                                    app:layout_constraintTop_toTopOf="parent" />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="18dp"
                                    android:fontFamily="@font/notosans_regular"
                                    android:includeFontPadding="false"
                                    android:text="@{Integer.toString(viewModel.postDetailState.data.imagesCount)}"
                                    android:textColor="@color/iDorm_gray_300"
                                    android:textSize="12sp"
                                    app:layout_constraintBottom_toBottomOf="parent"
                                    app:layout_constraintStart_toEndOf="@+id/imageView4"
                                    app:layout_constraintTop_toTopOf="parent" />

                                <androidx.appcompat.widget.AppCompatToggleButton
                                    android:id="@+id/likeButton"
                                    android:layout_width="65sp"
                                    android:layout_height="30sp"
                                    android:background="@drawable/selector_button_toggle"
                                    android:checked="@{viewModel.postDetailState.data.liked}"
                                    android:onClick="@{() -> viewModel.toggleLike()}"
                                    android:textColor="@color/selector_toggle_button_text"
                                    android:fontFamily="@font/notosans_regular"
                                    android:textSize="12sp"
                                    android:includeFontPadding="false"
                                    android:textOff="@string/enableLike"
                                    android:textOn="@string/disableLike"
                                    app:layout_constraintBottom_toBottomOf="parent"
                                    app:layout_constraintEnd_toEndOf="parent"
                                    app:layout_constraintTop_toTopOf="parent" />

                            </androidx.constraintlayout.widget.ConstraintLayout>


                        </LinearLayout>

                        <View
                            android:layout_width="match_parent"
                            android:layout_height="1dp"
                            android:background="@color/iDorm_gray_200"
                            app:layout_constraintBottom_toBottomOf="@+id/postInteraction" />

                        <LinearLayout
                            android:id="@+id/commentSort"
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            android:orientation="horizontal"
                            android:paddingHorizontal="24sp"
                            android:paddingVertical="8sp"
                            app:layout_constraintTop_toBottomOf="@id/postInteraction">


                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:layout_marginEnd="12sp"
                                android:onClick="@{() -> viewModel.setSort(`asc`)}"
                                android:text="등록순"
                                android:textColor="@color/selector_enabled_text"
                                app:sortstate="@{viewModel.sortState}"
                                app:sortvalue="@{`asc`}" />

                            <TextView
                                android:layout_width="wrap_content"
                                android:layout_height="wrap_content"
                                android:onClick="@{() -> viewModel.setSort(`desc`)}"
                                android:text="최신순"
                                android:textColor="@color/selector_enabled_text"
                                app:sortstate="@{viewModel.sortState}"
                                app:sortvalue="@{`desc`}" />

                        </LinearLayout>

                        <FrameLayout
                            android:layout_width="match_parent"
                            android:layout_height="wrap_content"
                            app:layout_constraintBottom_toBottomOf="parent"
                            app:layout_constraintTop_toBottomOf="@+id/commentSort">

                            <LinearLayout
                                android:id="@+id/noComments"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:gravity="center"
                                android:orientation="vertical">

                                <ImageView
                                    android:layout_width="60sp"
                                    android:layout_height="60sp"
                                    android:src="@drawable/ic_comment"

                                    />

                                <TextView
                                    android:layout_width="wrap_content"
                                    android:layout_height="wrap_content"
                                    android:text="아직 등록된 댓글이 없어요.\n첫 댓글을 남겨주세요."
                                    android:textAlignment="center" />
                            </LinearLayout>

                            <androidx.recyclerview.widget.RecyclerView
                                android:id="@+id/comments"
                                android:layout_width="match_parent"
                                android:layout_height="wrap_content"
                                android:orientation="vertical"
                                app:layoutManager="androidx.recyclerview.widget.LinearLayoutManager" />
                        </FrameLayout>

                    </androidx.constraintlayout.widget.ConstraintLayout>

                </androidx.core.widget.NestedScrollView>

            </androidx.swiperefreshlayout.widget.SwipeRefreshLayout>

            <androidx.constraintlayout.widget.ConstraintLayout
                android:id="@+id/commentWrite"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                android:background="@color/white"
                android:paddingHorizontal="24sp"
                android:paddingVertical="8sp"
                app:layout_constraintBottom_toBottomOf="parent"

                >

                <TextView
                    android:id="@+id/anonymousText"
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:fontFamily="@font/notosans_medium"
                    android:text="익명"
                    android:textSize="12sp"
                    android:includeFontPadding="false"
                    android:textColor="@color/black"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintStart_toStartOf="parent"
                    app:layout_constraintTop_toTopOf="parent" />

                <RadioButton
                    android:id="@+id/anonymousRadioButton"
                    android:layout_width="17dp"
                    android:layout_height="17dp"
                    android:layout_marginLeft="5.5sp"
                    android:background="@drawable/selector_radiobutton"
                    android:button="@null"
                    android:checked="@{viewModel.commentState.isAnonymous}"
                    android:onClick="@{() -> viewModel.toggleAnonymous()}"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintStart_toEndOf="@id/anonymousText"
                    app:layout_constraintTop_toTopOf="parent" />

                <com.google.android.material.textfield.TextInputEditText
                    android:id="@+id/commentInput"
                    android:layout_width="0dp"
                    android:layout_height="wrap_content"
                    android:layout_marginStart="5sp"
                    android:background="@drawable/view_edit_text_pill_gray_100"
                    android:hint="@string/enterCommentHint"
                    android:onTextChanged="@{viewModel::setCommentInput}"
                    android:paddingVertical="10sp"
                    android:paddingLeft="10sp"
                    android:paddingRight="35sp"
                    android:text="@{viewModel.commentState.content}"
                    android:textSize="12sp"
                    android:textColor="@color/iDorm_gray_400"
                    android:fontFamily="@font/notosans_regular"
                    android:includeFontPadding="false"
                    app:layout_constraintBottom_toBottomOf="parent"
                    app:layout_constraintEnd_toEndOf="parent"
                    app:layout_constraintStart_toEndOf="@id/anonymousRadioButton"
                    app:layout_constraintTop_toTopOf="parent"
                    tools:text="eodvdvdvdvdvdvdvdvdddbdvdvdvdvdvdvdvdvdvdv"/>

                <ImageButton
                    android:layout_width="wrap_content"
                    android:layout_height="wrap_content"
                    android:layout_marginEnd="10sp"
                    android:background="@null"
                    android:onClick="@{() -> activity.writeComment()}"
                    android:src="@drawable/ic_send"
                    app:layout_constraintBottom_toBottomOf="@id/commentInput"
                    app:layout_constraintEnd_toEndOf="@id/commentInput"
                    app:layout_constraintTop_toTopOf="@id/commentInput" />

            </androidx.constraintlayout.widget.ConstraintLayout>


        </androidx.constraintlayout.widget.ConstraintLayout>

    </FrameLayout>
</layout>